function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(10, 1);
  T(1)=(params(1)-1)/params(1);
  T(2)=params(5)*y(27)^T(1)+params(6)*y(28)^T(1)+params(7)*y(29)^T(1);
  T(3)=T(2)^((1-params(1)*params(2))/(params(1)-1));
  T(4)=params(5)*y(27)^((-1)/params(1));
  T(5)=params(6)*y(28)^((-1)/params(1));
  T(6)=exp(y(30));
  T(7)=T(6)*(1-params(3))*(y(20)/y(17))^params(3);
  T(8)=y(7)^params(3);
  T(9)=exp(y(31));
  T(10)=(1-params(3))*T(9)*(y(21)/y(18))^params(3);
  T(11)=T(3)*T(4);
  T(12)=T(3)*T(5);
  T(13)=T(7)*T(8)*T(11);
  residual(1)=(T(8)*T(10)*T(12))-(T(13));
  T(14)=params(7)*y(29)^((-1)/params(1));
  T(15)=exp(y(32));
  T(16)=(1-params(3))*T(15)*(y(22)/y(19))^params(3);
  T(17)=T(3)*T(14);
  residual(2)=(T(8)*T(16)*T(17))-(T(13));
  residual(3)=(1)-(y(19)+y(17)+y(18));
  T(18)=T(15)*y(19)^(1-params(3));
  T(19)=y(22)^params(3);
  residual(4)=(y(29))-(T(8)*T(18)*T(19));
  T(20)=T(6)*y(17)^(1-params(3));
  T(21)=y(20)^params(3);
  T(22)=T(20)*T(21);
  residual(5)=(y(27))-(T(8)*T(22)+y(7)*(1-params(8))-y(23));
  T(23)=T(6)*params(3)*(y(17)/y(20))^(1-params(3));
  T(24)=params(3)*T(9)*(y(18)/y(21))^(1-params(3));
  T(25)=T(8)*T(23)*T(11);
  residual(6)=(T(8)*T(24)*T(12))-(T(25));
  T(26)=params(3)*T(15)*(y(19)/y(22))^(1-params(3));
  residual(7)=(T(8)*T(26)*T(17))-(T(25));
  T(27)=params(5)*y(43)^T(1)+params(6)*y(44)^T(1)+params(7)*y(45)^T(1);
  T(28)=T(27)^((1-params(1)*params(2))/(params(1)-1));
  T(29)=params(5)*y(43)^((-1)/params(1));
  T(30)=params(3)*exp(y(46));
  T(31)=T(30)*(y(33)/y(36))^(1-params(3));
  T(32)=y(23)^params(3);
  T(33)=T(31)*T(32);
  T(34)=T(28)*T(29);
  residual(8)=(params(4)*(1+T(33)/y(23)-params(8)))-(T(11)/T(34));
  residual(9)=(1)-(y(22)+y(20)+y(21));
  T(35)=T(9)*y(18)^(1-params(3));
  T(36)=y(21)^params(3);
  residual(10)=(y(28))-(T(8)*T(35)*T(36));
  T(37)=getPowerDeriv(y(20)/y(17),params(3),1);
  T(38)=getPowerDeriv(y(17)/y(20),1-params(3),1);
  T(39)=getPowerDeriv(y(33)/y(36),1-params(3),1);
  T(40)=getPowerDeriv(y(21)/y(18),params(3),1);
  T(41)=getPowerDeriv(y(18)/y(21),1-params(3),1);
  T(42)=getPowerDeriv(y(22)/y(19),params(3),1);
  T(43)=getPowerDeriv(y(19)/y(22),1-params(3),1);
  T(44)=getPowerDeriv(y(7),params(3),1);
  T(45)=getPowerDeriv(T(2),(1-params(1)*params(2))/(params(1)-1),1);
  T(46)=params(5)*getPowerDeriv(y(27),T(1),1)*T(45);
  T(47)=T(4)*T(46)+T(3)*params(5)*getPowerDeriv(y(27),(-1)/params(1),1);
  T(48)=T(7)*T(8)*T(47);
  T(49)=getPowerDeriv(T(27),(1-params(1)*params(2))/(params(1)-1),1);
  T(50)=T(45)*params(6)*getPowerDeriv(y(28),T(1),1);
  T(51)=T(5)*T(50)+T(3)*params(6)*getPowerDeriv(y(28),(-1)/params(1),1);
  T(52)=T(45)*params(7)*getPowerDeriv(y(29),T(1),1);
  T(53)=T(14)*T(52)+T(3)*params(7)*getPowerDeriv(y(29),(-1)/params(1),1);
if nargout > 3
    g1_v = NaN(60, 1);
g1_v(1)=T(12)*T(10)*T(44)-T(11)*T(7)*T(44);
g1_v(2)=T(17)*T(16)*T(44)-T(11)*T(7)*T(44);
g1_v(3)=(-(T(18)*T(19)*T(44)));
g1_v(4)=(-(1-params(8)+T(22)*T(44)));
g1_v(5)=T(12)*T(24)*T(44)-T(11)*T(23)*T(44);
g1_v(6)=T(17)*T(26)*T(44)-T(11)*T(23)*T(44);
g1_v(7)=(-(T(35)*T(36)*T(44)));
g1_v(8)=T(12)*T(8)*(1-params(3))*T(9)*T(40)*1/y(18);
g1_v(9)=T(12)*T(8)*params(3)*T(9)*T(41)*(-y(18))/(y(21)*y(21));
g1_v(10)=(-1);
g1_v(11)=(-(T(8)*T(35)*getPowerDeriv(y(21),params(3),1)));
g1_v(12)=T(17)*T(8)*(1-params(3))*T(15)*(-y(22))/(y(19)*y(19))*T(42);
g1_v(13)=(-1);
g1_v(14)=(-(T(8)*T(19)*T(15)*getPowerDeriv(y(19),1-params(3),1)));
g1_v(15)=T(17)*T(8)*params(3)*T(15)*1/y(22)*T(43);
g1_v(16)=T(12)*T(8)*(1-params(3))*T(9)*(-y(21))/(y(18)*y(18))*T(40);
g1_v(17)=(-1);
g1_v(18)=T(12)*T(8)*params(3)*T(9)*1/y(21)*T(41);
g1_v(19)=(-(T(8)*T(36)*T(9)*getPowerDeriv(y(18),1-params(3),1)));
g1_v(20)=T(17)*T(8)*(1-params(3))*T(15)*T(42)*1/y(19);
g1_v(21)=(-(T(8)*T(18)*getPowerDeriv(y(22),params(3),1)));
g1_v(22)=T(17)*T(8)*params(3)*T(15)*T(43)*(-y(19))/(y(22)*y(22));
g1_v(23)=(-1);
g1_v(24)=1;
g1_v(25)=params(4)*(y(23)*T(31)*getPowerDeriv(y(23),params(3),1)-T(33))/(y(23)*y(23));
g1_v(26)=(-(T(11)*T(8)*T(6)*(1-params(3))*(-y(20))/(y(17)*y(17))*T(37)));
g1_v(27)=(-(T(11)*T(8)*T(6)*(1-params(3))*(-y(20))/(y(17)*y(17))*T(37)));
g1_v(28)=(-1);
g1_v(29)=(-(T(8)*T(21)*T(6)*getPowerDeriv(y(17),1-params(3),1)));
g1_v(30)=(-(T(11)*T(8)*T(6)*params(3)*1/y(20)*T(38)));
g1_v(31)=(-(T(11)*T(8)*T(6)*params(3)*1/y(20)*T(38)));
g1_v(32)=T(8)*T(10)*T(5)*T(46)-T(48);
g1_v(33)=T(8)*T(16)*T(14)*T(46)-T(48);
g1_v(34)=1;
g1_v(35)=T(8)*T(24)*T(5)*T(46)-T(8)*T(23)*T(47);
g1_v(36)=T(8)*T(26)*T(14)*T(46)-T(8)*T(23)*T(47);
g1_v(37)=(-(T(47)/T(34)));
g1_v(38)=T(8)*T(10)*T(5)*T(52)-T(7)*T(8)*T(4)*T(52);
g1_v(39)=T(8)*T(16)*T(53)-T(7)*T(8)*T(4)*T(52);
g1_v(40)=1;
g1_v(41)=T(8)*T(24)*T(5)*T(52)-T(8)*T(23)*T(4)*T(52);
g1_v(42)=T(8)*T(26)*T(53)-T(8)*T(23)*T(4)*T(52);
g1_v(43)=(-(T(4)*T(52)/T(34)));
g1_v(44)=(-(T(11)*T(8)*T(6)*(1-params(3))*T(37)*1/y(17)));
g1_v(45)=(-(T(11)*T(8)*T(6)*(1-params(3))*T(37)*1/y(17)));
g1_v(46)=(-(T(8)*T(20)*getPowerDeriv(y(20),params(3),1)));
g1_v(47)=(-(T(11)*T(8)*T(6)*params(3)*T(38)*(-y(17))/(y(20)*y(20))));
g1_v(48)=(-(T(11)*T(8)*T(6)*params(3)*T(38)*(-y(17))/(y(20)*y(20))));
g1_v(49)=(-1);
g1_v(50)=T(8)*T(10)*T(51)-T(7)*T(8)*T(4)*T(50);
g1_v(51)=T(8)*T(16)*T(14)*T(50)-T(7)*T(8)*T(4)*T(50);
g1_v(52)=T(8)*T(24)*T(51)-T(8)*T(23)*T(4)*T(50);
g1_v(53)=T(8)*T(26)*T(14)*T(50)-T(8)*T(23)*T(4)*T(50);
g1_v(54)=(-(T(4)*T(50)/T(34)));
g1_v(55)=1;
g1_v(56)=params(4)*T(32)*T(30)*1/y(36)*T(39)/y(23);
g1_v(57)=(-((-(T(11)*(T(29)*params(5)*getPowerDeriv(y(43),T(1),1)*T(49)+T(28)*params(5)*getPowerDeriv(y(43),(-1)/params(1),1))))/(T(34)*T(34))));
g1_v(58)=(-((-(T(11)*T(29)*T(49)*params(7)*getPowerDeriv(y(45),T(1),1)))/(T(34)*T(34))));
g1_v(59)=params(4)*T(32)*T(30)*T(39)*(-y(33))/(y(36)*y(36))/y(23);
g1_v(60)=(-((-(T(11)*T(29)*T(49)*params(6)*getPowerDeriv(y(44),T(1),1)))/(T(34)*T(34))));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 10, 30);
end
end
