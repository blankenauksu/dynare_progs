function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(13, 1);
  T(1)=(params(1)-1)/params(1);
  T(2)=params(5)*y(27)^T(1)+params(6)*y(28)^T(1)+params(7)*y(29)^T(1);
  T(3)=T(2)^((1-params(1)*params(2))/(params(1)-1));
  T(4)=params(5)*y(27)^((-1)/params(1));
  T(5)=params(6)*y(28)^((-1)/params(1));
  T(6)=exp(y(30));
  T(7)=T(6)*y(17);
  T(8)=y(24)^(params(3)-1);
  T(9)=T(7)*params(3)*T(8);
  T(10)=exp(y(31));
  T(11)=T(10)*y(18);
  T(12)=y(25)^(params(3)-1);
  T(13)=T(3)*T(4);
  T(14)=T(3)*T(5);
  T(15)=T(9)*T(13)/y(17);
  residual(1)=(params(3)*T(11)*T(12)*T(14))-(y(18)*T(15));
  T(16)=params(7)*y(29)^((-1)/params(1));
  T(17)=exp(y(32));
  T(18)=T(17)*y(19);
  T(19)=y(26)^(params(3)-1);
  T(20)=T(3)*T(16);
  residual(2)=(params(3)*T(18)*T(19)*T(20))-(y(19)*T(15));
  residual(3)=(1)-(y(22)+y(20)+y(21));
  T(21)=y(25)^params(3);
  residual(4)=(y(28))-(T(11)*T(21));
  T(22)=y(26)^params(3);
  residual(5)=(y(29))-(T(18)*T(22));
  residual(6)=(y(25))-(y(7)*y(21)/y(18));
  residual(7)=(y(26))-(y(7)*y(22)/y(19));
  T(23)=y(24)^params(3);
  residual(8)=(y(27))-(T(7)*T(23)+y(7)*(1-params(8))-y(23));
  T(24)=params(5)*y(43)^T(1)+params(6)*y(44)^T(1)+params(7)*y(45)^T(1);
  T(25)=T(24)^((1-params(1)*params(2))/(params(1)-1));
  T(26)=params(5)*y(43)^((-1)/params(1));
  T(27)=exp(y(46));
  T(28)=y(40)^(params(3)-1);
  T(29)=T(25)*T(26);
  residual(9)=(params(4)*(1+params(3)*T(27)*y(33)*T(28)-params(8)))-(T(13)/T(29));
  residual(10)=(1)-(y(19)+y(17)+y(18));
  residual(11)=(T(10)*(1-params(3))*T(21)*T(14)/(1-params(3))-y(25)*T(15))-(T(6)*(1-params(3))*T(23)*T(13)/(1-params(3))-y(24)*T(15));
  residual(12)=(T(17)*(1-params(3))*T(22)*T(20)/(1-params(3))-y(26)*T(15))-(T(6)*(1-params(3))*T(23)*T(13)/(1-params(3))-y(24)*T(15));
  residual(13)=(y(24))-(y(20)/y(17)*y(7));
  T(30)=(y(17)*T(13)*T(8)*T(6)*params(3)-T(9)*T(13))/(y(17)*y(17));
  T(31)=T(13)*T(7)*params(3)*getPowerDeriv(y(24),params(3)-1,1)/y(17);
  T(32)=getPowerDeriv(y(24),params(3),1);
  T(33)=getPowerDeriv(y(25),params(3),1);
  T(34)=getPowerDeriv(y(26),params(3),1);
  T(35)=getPowerDeriv(T(2),(1-params(1)*params(2))/(params(1)-1),1);
  T(36)=params(5)*getPowerDeriv(y(27),T(1),1)*T(35);
  T(37)=T(4)*T(36)+T(3)*params(5)*getPowerDeriv(y(27),(-1)/params(1),1);
  T(38)=T(9)*T(37)/y(17);
  T(39)=getPowerDeriv(T(24),(1-params(1)*params(2))/(params(1)-1),1);
  T(40)=T(35)*params(6)*getPowerDeriv(y(28),T(1),1);
  T(41)=T(5)*T(40)+T(3)*params(6)*getPowerDeriv(y(28),(-1)/params(1),1);
  T(42)=T(35)*params(7)*getPowerDeriv(y(29),T(1),1);
  T(43)=T(16)*T(42)+T(3)*params(7)*getPowerDeriv(y(29),(-1)/params(1),1);
if nargout > 3
    g1_v = NaN(63, 1);
g1_v(1)=(-(y(21)/y(18)));
g1_v(2)=(-(y(22)/y(19)));
g1_v(3)=(-(1-params(8)));
g1_v(4)=(-(y(20)/y(17)));
g1_v(5)=T(14)*params(3)*T(11)*getPowerDeriv(y(25),params(3)-1,1);
g1_v(6)=(-(T(11)*T(33)));
g1_v(7)=1;
g1_v(8)=T(14)/(1-params(3))*T(10)*(1-params(3))*T(33)-T(15);
g1_v(9)=T(20)*params(3)*T(18)*getPowerDeriv(y(26),params(3)-1,1);
g1_v(10)=(-(T(18)*T(34)));
g1_v(11)=1;
g1_v(12)=T(20)/(1-params(3))*T(17)*(1-params(3))*T(34)-T(15);
g1_v(13)=(-1);
g1_v(14)=(-(y(7)*1/y(17)));
g1_v(15)=T(14)*T(12)*params(3)*T(10)-T(15);
g1_v(16)=(-(T(10)*T(21)));
g1_v(17)=(-(y(7)*(-y(21))/(y(18)*y(18))));
g1_v(18)=(-1);
g1_v(19)=T(20)*T(19)*params(3)*T(17)-T(15);
g1_v(20)=(-(T(17)*T(22)));
g1_v(21)=(-(y(7)*(-y(22))/(y(19)*y(19))));
g1_v(22)=(-1);
g1_v(23)=(-1);
g1_v(24)=(-(y(7)*1/y(18)));
g1_v(25)=(-1);
g1_v(26)=(-(y(7)*1/y(19)));
g1_v(27)=1;
g1_v(28)=params(3)*T(11)*T(12)*T(41)-y(18)*T(9)*T(4)*T(40)/y(17);
g1_v(29)=params(3)*T(18)*T(19)*T(16)*T(40)-y(19)*T(9)*T(4)*T(40)/y(17);
g1_v(30)=1;
g1_v(31)=(-(T(4)*T(40)/T(29)));
g1_v(32)=T(10)*(1-params(3))*T(21)*T(41)/(1-params(3))-y(25)*T(9)*T(4)*T(40)/y(17)-(T(6)*(1-params(3))*T(23)*T(4)*T(40)/(1-params(3))-y(24)*T(9)*T(4)*T(40)/y(17));
g1_v(33)=T(17)*(1-params(3))*T(22)*T(16)*T(40)/(1-params(3))-y(26)*T(9)*T(4)*T(40)/y(17)-(T(6)*(1-params(3))*T(23)*T(4)*T(40)/(1-params(3))-y(24)*T(9)*T(4)*T(40)/y(17));
g1_v(34)=(-(y(18)*T(30)));
g1_v(35)=(-(y(19)*T(30)));
g1_v(36)=(-(T(6)*T(23)));
g1_v(37)=(-1);
g1_v(38)=y(24)*T(30)-y(25)*T(30);
g1_v(39)=y(24)*T(30)-y(26)*T(30);
g1_v(40)=(-(y(7)*(-y(20))/(y(17)*y(17))));
g1_v(41)=params(3)*T(11)*T(12)*T(5)*T(36)-y(18)*T(38);
g1_v(42)=params(3)*T(18)*T(19)*T(16)*T(36)-y(19)*T(38);
g1_v(43)=1;
g1_v(44)=(-(T(37)/T(29)));
g1_v(45)=T(10)*(1-params(3))*T(21)*T(5)*T(36)/(1-params(3))-y(25)*T(38)-(T(6)*(1-params(3))*T(23)*T(37)/(1-params(3))-y(24)*T(38));
g1_v(46)=T(17)*(1-params(3))*T(22)*T(16)*T(36)/(1-params(3))-y(26)*T(38)-(T(6)*(1-params(3))*T(23)*T(37)/(1-params(3))-y(24)*T(38));
g1_v(47)=params(3)*T(11)*T(12)*T(5)*T(42)-y(18)*T(9)*T(4)*T(42)/y(17);
g1_v(48)=params(3)*T(18)*T(19)*T(43)-y(19)*T(9)*T(4)*T(42)/y(17);
g1_v(49)=1;
g1_v(50)=(-(T(4)*T(42)/T(29)));
g1_v(51)=T(10)*(1-params(3))*T(21)*T(5)*T(42)/(1-params(3))-y(25)*T(9)*T(4)*T(42)/y(17)-(T(6)*(1-params(3))*T(23)*T(4)*T(42)/(1-params(3))-y(24)*T(9)*T(4)*T(42)/y(17));
g1_v(52)=T(17)*(1-params(3))*T(22)*T(43)/(1-params(3))-y(26)*T(9)*T(4)*T(42)/y(17)-(T(6)*(1-params(3))*T(23)*T(4)*T(42)/(1-params(3))-y(24)*T(9)*T(4)*T(42)/y(17));
g1_v(53)=(-(y(18)*T(31)));
g1_v(54)=(-(y(19)*T(31)));
g1_v(55)=(-(T(7)*T(32)));
g1_v(56)=(-(y(25)*T(31)))-(T(13)/(1-params(3))*T(6)*(1-params(3))*T(32)-(T(15)+y(24)*T(31)));
g1_v(57)=(-(y(26)*T(31)))-(T(13)/(1-params(3))*T(6)*(1-params(3))*T(32)-(T(15)+y(24)*T(31)));
g1_v(58)=1;
g1_v(59)=(-((-(T(13)*T(26)*T(39)*params(6)*getPowerDeriv(y(44),T(1),1)))/(T(29)*T(29))));
g1_v(60)=params(4)*T(28)*params(3)*T(27);
g1_v(61)=(-((-(T(13)*(T(26)*params(5)*getPowerDeriv(y(43),T(1),1)*T(39)+T(25)*params(5)*getPowerDeriv(y(43),(-1)/params(1),1))))/(T(29)*T(29))));
g1_v(62)=(-((-(T(13)*T(26)*T(39)*params(7)*getPowerDeriv(y(45),T(1),1)))/(T(29)*T(29))));
g1_v(63)=params(4)*params(3)*T(27)*y(33)*getPowerDeriv(y(40),params(3)-1,1);
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 13, 39);
end
end
