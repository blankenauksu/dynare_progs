function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(9, 1);
  residual(1)=(1)-(y(15)+y(14)+y(13));
  T(1)=exp(y(22));
  T(2)=y(16)^params(3);
  residual(2)=(y(19))-(T(1)*y(13)*T(2)+(1-params(8))*(y(13)*y(16)+y(14)*y(17)+y(15)*y(18))-(y(25)*y(28)+y(29)*y(26)+y(30)*y(27)));
  T(3)=exp(y(23));
  T(4)=y(17)^params(3);
  residual(3)=(y(20))-(T(3)*y(14)*T(4));
  T(5)=exp(y(24));
  T(6)=y(18)^params(3);
  residual(4)=(y(21))-(T(5)*y(15)*T(6));
  T(7)=params(6)*y(20)^((-1)/params(1));
  T(8)=(params(1)-1)/params(1);
  T(9)=params(5)*y(19)^T(8)+params(6)*y(20)^T(8)+params(7)*y(21)^T(8);
  T(10)=T(9)^((1-params(1)*params(2))/(params(1)-1));
  T(11)=T(7)*T(10);
  T(12)=y(19)^((-1)/params(1));
  T(13)=y(16)^(params(3)-1);
  residual(5)=(T(4)*(1-params(3))*y(23)*T(11)/(1-params(3)))-(T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(17)/y(13)+T(2)*(1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)/y(13));
  T(14)=params(7)*y(21)^((-1)/params(1));
  T(15)=T(10)*T(14);
  residual(6)=(T(6)*(1-params(3))*y(24)*T(15)/(1-params(3)))-(T(2)*(1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))/y(13)+T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(18)/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)/y(13));
  T(16)=y(17)^(params(3)-1);
  residual(7)=(T(11)*T(3)*y(14)*params(3)*T(16))-(params(3)*T(10)*params(5)*y(14)*T(12)*T(1)*y(13)*T(13)/y(13));
  T(17)=y(18)^(params(3)-1);
  residual(8)=(params(3)*T(15)*T(5)*y(15)*T(17))-(T(13)*params(3)*y(13)*T(1)*T(10)*T(12)*params(5)*y(15)/y(13));
  T(18)=exp(y(34));
  T(19)=y(28)^(params(3)-1);
  T(20)=params(5)*y(31)^((-1)/params(1));
  T(21)=params(5)*y(31)^T(8)+params(6)*y(32)^T(8)+params(7)*y(33)^T(8);
  T(22)=T(21)^((1-params(1)*params(2))/(params(1)-1));
  T(23)=T(20)*T(22);
  residual(9)=(params(4)*(1+params(3)*T(18)*y(25)*T(19)-params(8)))-(T(10)*params(5)*T(12)/T(23));
  T(24)=getPowerDeriv(y(16),params(3)-1,1);
  T(25)=getPowerDeriv(y(16),params(3),1);
  T(26)=T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)/y(13)+y(16)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)*T(24)/y(13);
  T(27)=getPowerDeriv(y(17),params(3),1);
  T(28)=getPowerDeriv(y(18),params(3),1);
  T(29)=getPowerDeriv(T(9),(1-params(1)*params(2))/(params(1)-1),1);
  T(30)=params(5)*getPowerDeriv(y(19),T(8),1)*T(29);
  T(31)=getPowerDeriv(y(19),(-1)/params(1),1);
  T(32)=getPowerDeriv(T(21),(1-params(1)*params(2))/(params(1)-1),1);
  T(33)=T(29)*params(6)*getPowerDeriv(y(20),T(8),1);
  T(34)=T(10)*params(6)*getPowerDeriv(y(20),(-1)/params(1),1)+T(7)*T(33);
  T(35)=T(29)*params(7)*getPowerDeriv(y(21),T(8),1);
  T(36)=T(14)*T(35)+T(10)*params(7)*getPowerDeriv(y(21),(-1)/params(1),1);
if nargout > 3
    g1_v = NaN(47, 1);
g1_v(1)=(-1);
g1_v(2)=(-(y(18)*(1-params(8))));
g1_v(3)=(-(T(5)*T(6)));
g1_v(4)=T(17)*params(3)*T(15)*T(5)-T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)/y(13);
g1_v(5)=(-1);
g1_v(6)=(-(T(1)*T(2)+y(16)*(1-params(8))));
g1_v(7)=(-((-(T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(17)))/(y(13)*y(13))+(-(T(2)*(1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))))/(y(13)*y(13))-y(16)*(y(13)*T(13)*params(3)*T(1)*T(10)*params(5)*T(12)-T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12))/(y(13)*y(13))));
g1_v(8)=(-((-(T(2)*(1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))))/(y(13)*y(13))+(-(T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(18)))/(y(13)*y(13))-y(16)*(y(13)*T(13)*params(3)*T(1)*T(10)*params(5)*T(12)-T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12))/(y(13)*y(13))));
g1_v(9)=(-((y(13)*T(13)*params(3)*T(10)*params(5)*y(14)*T(12)*T(1)-params(3)*T(10)*params(5)*y(14)*T(12)*T(1)*y(13)*T(13))/(y(13)*y(13))));
g1_v(10)=(-((y(13)*T(13)*params(3)*T(1)*T(10)*T(12)*params(5)*y(15)-T(13)*params(3)*y(13)*T(1)*T(10)*T(12)*params(5)*y(15))/(y(13)*y(13))));
g1_v(11)=(-(y(14)*(1-params(8))));
g1_v(12)=(-(T(3)*y(14)*T(27)));
g1_v(13)=(1-params(3))*y(23)*T(11)/(1-params(3))*T(27)-T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*params(5)*T(12)/y(13);
g1_v(14)=T(11)*T(3)*y(14)*params(3)*getPowerDeriv(y(17),params(3)-1,1);
g1_v(15)=(-(y(15)*(1-params(8))));
g1_v(16)=(-(T(5)*y(15)*T(28)));
g1_v(17)=(1-params(3))*y(24)*T(15)/(1-params(3))*T(28)-T(13)*params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*params(5)*T(12)/y(13);
g1_v(18)=params(3)*T(15)*T(5)*y(15)*getPowerDeriv(y(18),params(3)-1,1);
g1_v(19)=1;
g1_v(20)=T(4)*(1-params(3))*y(23)*T(7)*T(30)/(1-params(3))-(T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(17)*T(30)+T(10)*(params(5)*T(10)*T(12)*params(5)*y(17)*T(31)+T(12)*params(5)*(T(12)*params(5)*y(17)*T(30)+T(10)*params(5)*y(17)*T(31))))/y(13)+T(2)*(1-params(3))*y(22)*(params(5)*T(12)*T(30)+T(10)*params(5)*T(31))/(1-params(3))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*(params(5)*T(12)*T(30)+T(10)*params(5)*T(31))/y(13));
g1_v(21)=T(6)*(1-params(3))*y(24)*T(14)*T(30)/(1-params(3))-(T(2)*(1-params(3))*y(22)*(params(5)*T(12)*T(30)+T(10)*params(5)*T(31))/(1-params(3))/y(13)+T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(18)*T(30)+T(10)*(params(5)*T(10)*T(12)*params(5)*y(18)*T(31)+T(12)*params(5)*(T(12)*params(5)*y(18)*T(30)+T(10)*params(5)*y(18)*T(31))))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*(params(5)*T(12)*T(30)+T(10)*params(5)*T(31))/y(13));
g1_v(22)=T(16)*params(3)*y(14)*T(3)*T(7)*T(30)-T(13)*params(3)*y(13)*T(1)*(params(5)*y(14)*T(12)*T(30)+T(10)*params(5)*y(14)*T(31))/y(13);
g1_v(23)=T(17)*params(3)*y(15)*T(5)*T(14)*T(30)-T(13)*params(3)*y(13)*T(1)*(T(12)*params(5)*y(15)*T(30)+T(10)*params(5)*y(15)*T(31))/y(13);
g1_v(24)=(-((params(5)*T(12)*T(30)+T(10)*params(5)*T(31))/T(23)));
g1_v(25)=(-1);
g1_v(26)=(-(y(17)*(1-params(8))));
g1_v(27)=(-(T(3)*T(4)));
g1_v(28)=(-(T(13)*params(3)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(17)/y(13)));
g1_v(29)=(-(T(13)*params(3)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(18)/y(13)));
g1_v(30)=T(16)*T(11)*T(3)*params(3)-T(13)*params(3)*y(13)*T(1)*T(10)*params(5)*T(12)/y(13);
g1_v(31)=(-(T(1)*y(13)*T(25)+y(13)*(1-params(8))));
g1_v(32)=(-(params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(17)*T(24)/y(13)+(1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))*T(25)/y(13)-T(26)));
g1_v(33)=(-((1-params(3))*y(22)*T(10)*params(5)*T(12)/(1-params(3))*T(25)/y(13)+params(3)*y(14)*T(1)*T(10)*T(12)*params(5)*T(10)*T(12)*params(5)*y(18)*T(24)/y(13)-T(26)));
g1_v(34)=(-(params(3)*T(10)*params(5)*y(14)*T(12)*T(1)*y(13)*T(24)/y(13)));
g1_v(35)=(-(params(3)*y(13)*T(1)*T(10)*T(12)*params(5)*y(15)*T(24)/y(13)));
g1_v(36)=1;
g1_v(37)=T(4)*(1-params(3))*y(23)*T(7)*T(35)/(1-params(3))-(T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(17)*T(35)+T(10)*T(12)*params(5)*T(12)*params(5)*y(17)*T(35))/y(13)+T(2)*(1-params(3))*y(22)*params(5)*T(12)*T(35)/(1-params(3))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*params(5)*T(12)*T(35)/y(13));
g1_v(38)=T(6)*(1-params(3))*y(24)*T(36)/(1-params(3))-(T(2)*(1-params(3))*y(22)*params(5)*T(12)*T(35)/(1-params(3))/y(13)+T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(18)*T(35)+T(10)*T(12)*params(5)*T(12)*params(5)*y(18)*T(35))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*params(5)*T(12)*T(35)/y(13));
g1_v(39)=T(16)*params(3)*y(14)*T(3)*T(7)*T(35)-T(13)*params(3)*y(13)*T(1)*params(5)*y(14)*T(12)*T(35)/y(13);
g1_v(40)=T(17)*params(3)*y(15)*T(5)*T(36)-T(13)*params(3)*y(13)*T(1)*T(12)*params(5)*y(15)*T(35)/y(13);
g1_v(41)=(-(params(5)*T(12)*T(35)/T(23)));
g1_v(42)=1;
g1_v(43)=T(4)*(1-params(3))*y(23)*T(34)/(1-params(3))-(T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(17)*T(33)+T(10)*T(12)*params(5)*T(12)*params(5)*y(17)*T(33))/y(13)+T(2)*(1-params(3))*y(22)*params(5)*T(12)*T(33)/(1-params(3))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*params(5)*T(12)*T(33)/y(13));
g1_v(44)=T(6)*(1-params(3))*y(24)*T(14)*T(33)/(1-params(3))-(T(2)*(1-params(3))*y(22)*params(5)*T(12)*T(33)/(1-params(3))/y(13)+T(13)*params(3)*y(14)*T(1)*(T(12)*params(5)*T(10)*T(12)*params(5)*y(18)*T(33)+T(10)*T(12)*params(5)*T(12)*params(5)*y(18)*T(33))/y(13)-y(16)*T(13)*params(3)*y(13)*T(1)*params(5)*T(12)*T(33)/y(13));
g1_v(45)=T(16)*params(3)*y(14)*T(3)*T(34)-T(13)*params(3)*y(13)*T(1)*params(5)*y(14)*T(12)*T(33)/y(13);
g1_v(46)=T(17)*params(3)*y(15)*T(5)*T(14)*T(33)-T(13)*params(3)*y(13)*T(1)*T(12)*params(5)*y(15)*T(33)/y(13);
g1_v(47)=(-(params(5)*T(12)*T(33)/T(23)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 9, 9);
end
end
