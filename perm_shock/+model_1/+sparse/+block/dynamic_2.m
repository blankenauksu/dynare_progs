function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(11, 1);
  T(1)=params(10)/2*(y(31)/y(7)-params(8))^2;
  residual(1)=(y(24))-(y(31)+y(7)*(1-params(8))-y(7)*T(1));
  T(2)=(params(1)-1)/params(1);
  T(3)=params(5)*y(28)^T(2)+params(6)*y(29)^T(2)+params(7)*y(30)^T(2);
  T(4)=T(3)^((1-params(1)*params(2))/(params(1)-1));
  T(5)=(-1)/params(1);
  T(6)=params(5)*y(28)^T(5);
  T(7)=params(7)*y(30)^T(5);
  T(8)=params(9)/2;
  T(9)=1-T(8)*(y(18)/y(1)-1)^2;
  T(10)=1-T(8)*(y(20)/y(3)-1)^2;
  T(11)=exp(x(1));
  T(12)=exp(x(3));
  T(13)=y(7)^params(3);
  T(14)=T(4)*T(6);
  T(15)=T(4)*T(7);
  T(16)=T(11)*params(3)*(T(9)*y(18)/y(21))^(1-params(3));
  T(17)=params(3)*T(12)*(T(10)*y(20)/y(23))^(1-params(3));
  T(18)=T(14)*T(13)*T(16);
  residual(2)=(T(15)*T(13)*T(17))-(T(18));
  residual(3)=(1)-(y(20)+y(18)+y(19));
  T(19)=T(12)*y(20)^(1-params(3));
  T(20)=y(23)^params(3);
  T(21)=T(10)^(1-params(3));
  T(22)=T(20)*T(19)*T(21);
  residual(4)=(y(30))-(T(13)*T(22));
  T(23)=params(5)*y(45)^T(2)+params(6)*y(46)^T(2)+params(7)*y(47)^T(2);
  T(24)=T(23)^((1-params(1)*params(2))/(params(1)-1));
  T(25)=params(6)*y(29)^T(5);
  T(26)=params(5)*y(45)^T(5);
  T(27)=params(6)*y(46)^T(5);
  T(28)=1-T(8)*(y(19)/y(2)-1)^2;
  T(29)=1-T(8)*(y(35)/y(18)-1)^2;
  T(30)=1-T(8)*(y(36)/y(19)-1)^2;
  T(31)=exp(x(2));
  T(32)=(y(35)/y(18))^2;
  T(33)=(y(36)/y(19))^2;
  T(34)=T(4)*T(25);
  T(35)=T(24)*T(26);
  T(36)=T(24)*T(27);
  T(37)=T(11)*(1-params(3))*(y(21)*y(7)/y(18)/T(9))^params(3);
  T(38)=(1-params(3))*T(31)*(y(7)*y(22)/y(19)/T(28))^params(3);
  T(39)=y(24)*y(39)/y(36)/T(30);
  T(40)=T(9)-(y(18)/y(1)-1)*params(9)*y(18)/y(1);
  T(41)=T(28)-(y(19)/y(2)-1)*params(9)*y(19)/y(2);
  T(42)=T(34)*T(41);
  T(43)=params(9)*(y(36)/y(19)-1)*T(33)*T(36);
  T(44)=T(14)*T(40);
  T(45)=params(9)*(y(35)/y(18)-1)*T(32)*T(35);
  T(46)=(1-params(3))*exp(y(49));
  T(47)=T(39)^params(3)*T(46);
  T(48)=exp(y(50));
  T(49)=(y(38)*y(24)/y(35)/T(29))^params(3)*(1-params(3))*T(48);
  T(50)=T(37)*T(44)+T(45)*T(49);
  residual(5)=(T(38)*T(42)+T(43)*T(47))-(T(50));
  T(51)=params(7)*y(47)^T(5);
  T(52)=1-T(8)*(y(37)/y(20)-1)^2;
  T(53)=(y(37)/y(20))^2;
  T(54)=T(24)*T(51);
  T(55)=(1-params(3))*T(12)*(y(7)*y(23)/y(20)/T(10))^params(3);
  T(56)=y(24)*y(40)/y(37)/T(52);
  T(57)=T(10)-(y(20)/y(3)-1)*params(9)*y(20)/y(3);
  T(58)=T(15)*T(57);
  T(59)=params(9)*(y(37)/y(20)-1)*T(53)*T(54);
  T(60)=(1-params(3))*exp(y(51));
  T(61)=T(56)^params(3)*T(60);
  residual(6)=(T(55)*T(58)+T(59)*T(61))-(T(50));
  T(62)=params(3)*T(31)*(T(28)*y(19)/y(22))^(1-params(3));
  residual(7)=(T(34)*T(13)*T(62))-(T(18));
  T(63)=y(24)^params(3);
  T(64)=1-params(10)*(y(31)/y(7)-params(8));
  T(65)=1-params(8)-params(10)/2*(y(48)/y(24)-params(8))^2+(y(48)/y(24)-params(8))*params(10)*y(48)/y(24);
  T(66)=(T(29)*y(35)/y(38))^(1-params(3))*params(3)*T(48);
  T(67)=T(63)*T(66);
  residual(8)=(params(4)*(T(65)/(1-params(10)*(y(48)/y(24)-params(8)))+T(67)/y(24)))-(T(14)/T(35)/T(64));
  residual(9)=(1)-(y(23)+y(21)+y(22));
  T(68)=T(11)*y(18)^(1-params(3));
  T(69)=y(21)^params(3);
  T(70)=T(9)^(1-params(3));
  T(71)=T(69)*T(68)*T(70);
  residual(10)=(y(28))-(T(13)*T(71)-y(31));
  T(72)=T(31)*y(19)^(1-params(3));
  T(73)=y(22)^params(3);
  T(74)=T(28)^(1-params(3));
  T(75)=T(73)*T(72)*T(74);
  residual(11)=(y(29))-(T(13)*T(75));
  T(76)=(-(T(8)*(-y(18))/(y(1)*y(1))*2*(y(18)/y(1)-1)));
  T(77)=getPowerDeriv(y(21)*y(7)/y(18)/T(9),params(3),1);
  T(78)=(-(T(44)*T(11)*(1-params(3))*(-(y(21)*y(7)/y(18)*T(76)))/(T(9)*T(9))*T(77)+T(37)*T(14)*(T(76)-(params(9)*y(18)/y(1)*(-y(18))/(y(1)*y(1))+(y(18)/y(1)-1)*(-(params(9)*y(18)))/(y(1)*y(1))))));
  T(79)=getPowerDeriv(T(9)*y(18)/y(21),1-params(3),1);
  T(80)=getPowerDeriv(T(9),1-params(3),1);
  T(81)=(-(T(8)*2*(y(18)/y(1)-1)*1/y(1)));
  T(82)=getPowerDeriv(y(38)*y(24)/y(35)/T(29),params(3),1);
  T(83)=(-(T(44)*T(11)*(1-params(3))*T(77)*(T(9)*(-(y(21)*y(7)))/(y(18)*y(18))-y(21)*y(7)/y(18)*T(81))/(T(9)*T(9))+T(37)*T(14)*(T(81)-(params(9)*y(18)/y(1)*1/y(1)+(y(18)/y(1)-1)*params(9)/y(1)))+T(49)*T(35)*(T(32)*params(9)*(-y(35))/(y(18)*y(18))+params(9)*(y(35)/y(18)-1)*(-y(35))/(y(18)*y(18))*2*y(35)/y(18))+T(45)*(1-params(3))*T(48)*(-(y(38)*y(24)/y(35)*(-(T(8)*(-y(35))/(y(18)*y(18))*2*(y(35)/y(18)-1)))))/(T(29)*T(29))*T(82)));
  T(84)=getPowerDeriv(T(29)*y(35)/y(38),1-params(3),1);
  T(85)=(-(T(49)*T(35)*(T(32)*params(9)*1/y(18)+params(9)*(y(35)/y(18)-1)*2*y(35)/y(18)*1/y(18))+T(45)*(1-params(3))*T(48)*T(82)*(T(29)*(-(y(38)*y(24)))/(y(35)*y(35))-y(38)*y(24)/y(35)*(-(T(8)*2*(y(35)/y(18)-1)*1/y(18))))/(T(29)*T(29))));
  T(86)=(-(T(8)*(-y(19))/(y(2)*y(2))*2*(y(19)/y(2)-1)));
  T(87)=getPowerDeriv(y(7)*y(22)/y(19)/T(28),params(3),1);
  T(88)=getPowerDeriv(T(28)*y(19)/y(22),1-params(3),1);
  T(89)=getPowerDeriv(T(28),1-params(3),1);
  T(90)=(-(T(8)*2*(y(19)/y(2)-1)*1/y(2)));
  T(91)=getPowerDeriv(T(39),params(3),1);
  T(92)=(-(T(8)*(-y(20))/(y(3)*y(3))*2*(y(20)/y(3)-1)));
  T(93)=getPowerDeriv(y(7)*y(23)/y(20)/T(10),params(3),1);
  T(94)=getPowerDeriv(T(10)*y(20)/y(23),1-params(3),1);
  T(95)=getPowerDeriv(T(10),1-params(3),1);
  T(96)=(-(T(8)*2*(y(20)/y(3)-1)*1/y(3)));
  T(97)=getPowerDeriv(T(56),params(3),1);
  T(98)=getPowerDeriv(y(7),params(3),1);
  T(99)=getPowerDeriv(T(3),(1-params(1)*params(2))/(params(1)-1),1);
  T(100)=params(5)*getPowerDeriv(y(28),T(2),1)*T(99);
  T(101)=T(6)*T(100)+T(4)*params(5)*getPowerDeriv(y(28),T(5),1);
  T(102)=getPowerDeriv(T(23),(1-params(1)*params(2))/(params(1)-1),1);
  T(103)=params(5)*getPowerDeriv(y(45),T(2),1)*T(102);
  T(104)=T(26)*T(103)+T(24)*params(5)*getPowerDeriv(y(45),T(5),1);
  T(105)=T(49)*params(9)*(y(35)/y(18)-1)*T(32)*T(104);
  T(106)=T(99)*params(6)*getPowerDeriv(y(29),T(2),1);
  T(107)=T(25)*T(106)+T(4)*params(6)*getPowerDeriv(y(29),T(5),1);
  T(108)=T(102)*params(6)*getPowerDeriv(y(46),T(2),1);
  T(109)=T(99)*params(7)*getPowerDeriv(y(30),T(2),1);
  T(110)=T(7)*T(109)+T(4)*params(7)*getPowerDeriv(y(30),T(5),1);
  T(111)=T(102)*params(7)*getPowerDeriv(y(47),T(2),1);
if nargout > 3
    g1_v = NaN(94, 1);
g1_v(1)=(-(1-params(8)-(T(1)+y(7)*params(10)/2*(-y(31))/(y(7)*y(7))*2*(y(31)/y(7)-params(8)))));
g1_v(2)=T(15)*T(17)*T(98)-T(14)*T(16)*T(98);
g1_v(3)=(-(T(22)*T(98)));
g1_v(4)=T(42)*(1-params(3))*T(31)*T(87)*y(22)/y(19)/T(28)-T(44)*T(11)*(1-params(3))*T(77)*y(21)/y(18)/T(9);
g1_v(5)=T(58)*(1-params(3))*T(12)*T(93)*y(23)/y(20)/T(10)-T(44)*T(11)*(1-params(3))*T(77)*y(21)/y(18)/T(9);
g1_v(6)=T(34)*T(62)*T(98)-T(14)*T(16)*T(98);
g1_v(7)=(-((-(T(14)/T(35)*(-(params(10)*(-y(31))/(y(7)*y(7))))))/(T(64)*T(64))));
g1_v(8)=(-(T(71)*T(98)));
g1_v(9)=(-(T(75)*T(98)));
g1_v(10)=(-(T(14)*T(13)*T(11)*params(3)*y(18)/y(21)*T(76)*T(79)));
g1_v(11)=T(78);
g1_v(12)=T(78);
g1_v(13)=(-(T(14)*T(13)*T(11)*params(3)*y(18)/y(21)*T(76)*T(79)));
g1_v(14)=(-(T(13)*T(69)*T(68)*T(76)*T(80)));
g1_v(15)=T(42)*(1-params(3))*T(31)*(-(y(7)*y(22)/y(19)*T(86)))/(T(28)*T(28))*T(87)+T(38)*T(34)*(T(86)-(params(9)*y(19)/y(2)*(-y(19))/(y(2)*y(2))+(y(19)/y(2)-1)*(-(params(9)*y(19)))/(y(2)*y(2))));
g1_v(16)=T(34)*T(13)*params(3)*T(31)*y(19)/y(22)*T(86)*T(88);
g1_v(17)=(-(T(13)*T(73)*T(72)*T(86)*T(89)));
g1_v(18)=T(15)*T(13)*params(3)*T(12)*y(20)/y(23)*T(92)*T(94);
g1_v(19)=(-(T(13)*T(20)*T(19)*T(92)*T(95)));
g1_v(20)=T(58)*(1-params(3))*T(12)*(-(y(7)*y(23)/y(20)*T(92)))/(T(10)*T(10))*T(93)+T(55)*T(15)*(T(92)-(params(9)*y(20)/y(3)*(-y(20))/(y(3)*y(3))+(y(20)/y(3)-1)*(-(params(9)*y(20)))/(y(3)*y(3))));
g1_v(21)=1;
g1_v(22)=T(43)*T(46)*T(91)*y(39)/y(36)/T(30)-T(45)*(1-params(3))*T(48)*T(82)*y(38)/y(35)/T(29);
g1_v(23)=T(59)*T(60)*T(97)*y(40)/y(37)/T(52)-T(45)*(1-params(3))*T(48)*T(82)*y(38)/y(35)/T(29);
g1_v(24)=params(4)*(((1-params(10)*(y(48)/y(24)-params(8)))*(params(10)*y(48)/y(24)*(-y(48))/(y(24)*y(24))+(y(48)/y(24)-params(8))*(-(params(10)*y(48)))/(y(24)*y(24))-params(10)/2*(-y(48))/(y(24)*y(24))*2*(y(48)/y(24)-params(8)))-T(65)*(-(params(10)*(-y(48))/(y(24)*y(24)))))/((1-params(10)*(y(48)/y(24)-params(8)))*(1-params(10)*(y(48)/y(24)-params(8))))+(y(24)*T(66)*getPowerDeriv(y(24),params(3),1)-T(67))/(y(24)*y(24)));
g1_v(25)=(-(T(14)*T(13)*T(11)*params(3)*T(79)*(y(18)/y(21)*T(81)+T(9)*1/y(21))));
g1_v(26)=(-1);
g1_v(27)=T(83);
g1_v(28)=T(83);
g1_v(29)=(-(T(14)*T(13)*T(11)*params(3)*T(79)*(y(18)/y(21)*T(81)+T(9)*1/y(21))));
g1_v(30)=params(4)*T(63)*params(3)*T(48)*y(35)/y(38)*(-(T(8)*(-y(35))/(y(18)*y(18))*2*(y(35)/y(18)-1)))*T(84)/y(24);
g1_v(31)=(-(T(13)*T(69)*(T(70)*T(11)*getPowerDeriv(y(18),1-params(3),1)+T(68)*T(80)*T(81))));
g1_v(32)=(-1);
g1_v(33)=T(42)*(1-params(3))*T(31)*T(87)*(T(28)*(-(y(7)*y(22)))/(y(19)*y(19))-y(7)*y(22)/y(19)*T(90))/(T(28)*T(28))+T(38)*T(34)*(T(90)-(params(9)*y(19)/y(2)*1/y(2)+(y(19)/y(2)-1)*params(9)/y(2)))+T(47)*T(36)*(T(33)*params(9)*(-y(36))/(y(19)*y(19))+params(9)*(y(36)/y(19)-1)*(-y(36))/(y(19)*y(19))*2*y(36)/y(19))+T(43)*T(46)*(-(y(24)*y(39)/y(36)*(-(T(8)*(-y(36))/(y(19)*y(19))*2*(y(36)/y(19)-1)))))/(T(30)*T(30))*T(91);
g1_v(34)=T(34)*T(13)*params(3)*T(31)*T(88)*(y(19)/y(22)*T(90)+T(28)*1/y(22));
g1_v(35)=(-(T(13)*T(73)*(T(74)*T(31)*getPowerDeriv(y(19),1-params(3),1)+T(72)*T(89)*T(90))));
g1_v(36)=T(15)*T(13)*params(3)*T(12)*T(94)*(y(20)/y(23)*T(96)+T(10)*1/y(23));
g1_v(37)=(-1);
g1_v(38)=(-(T(13)*T(20)*(T(21)*T(12)*getPowerDeriv(y(20),1-params(3),1)+T(19)*T(95)*T(96))));
g1_v(39)=T(58)*(1-params(3))*T(12)*T(93)*(T(10)*(-(y(7)*y(23)))/(y(20)*y(20))-y(7)*y(23)/y(20)*T(96))/(T(10)*T(10))+T(55)*T(15)*(T(96)-(params(9)*y(20)/y(3)*1/y(3)+(y(20)/y(3)-1)*params(9)/y(3)))+T(61)*T(54)*(T(53)*params(9)*(-y(37))/(y(20)*y(20))+params(9)*(y(37)/y(20)-1)*(-y(37))/(y(20)*y(20))*2*y(37)/y(20))+T(59)*T(60)*(-(y(24)*y(40)/y(37)*(-(T(8)*(-y(37))/(y(20)*y(20))*2*(y(37)/y(20)-1)))))/(T(52)*T(52))*T(97);
g1_v(40)=T(13)*T(17)*T(7)*T(106)-T(13)*T(16)*T(6)*T(106);
g1_v(41)=T(38)*T(41)*T(107)-T(37)*T(40)*T(6)*T(106);
g1_v(42)=T(55)*T(57)*T(7)*T(106)-T(37)*T(40)*T(6)*T(106);
g1_v(43)=T(13)*T(62)*T(107)-T(13)*T(16)*T(6)*T(106);
g1_v(44)=(-(T(6)*T(106)/T(35)/T(64)));
g1_v(45)=1;
g1_v(46)=T(13)*T(17)*T(7)*T(100)-T(13)*T(16)*T(101);
g1_v(47)=T(38)*T(41)*T(25)*T(100)-T(37)*T(40)*T(101);
g1_v(48)=T(55)*T(57)*T(7)*T(100)-T(37)*T(40)*T(101);
g1_v(49)=T(13)*T(62)*T(25)*T(100)-T(13)*T(16)*T(101);
g1_v(50)=(-(T(101)/T(35)/T(64)));
g1_v(51)=1;
g1_v(52)=(-(T(14)*T(13)*T(11)*params(3)*T(79)*T(9)*(-y(18))/(y(21)*y(21))));
g1_v(53)=(-(T(44)*T(11)*(1-params(3))*T(77)*y(7)/y(18)/T(9)));
g1_v(54)=(-(T(44)*T(11)*(1-params(3))*T(77)*y(7)/y(18)/T(9)));
g1_v(55)=(-(T(14)*T(13)*T(11)*params(3)*T(79)*T(9)*(-y(18))/(y(21)*y(21))));
g1_v(56)=(-1);
g1_v(57)=(-(T(13)*T(68)*T(70)*getPowerDeriv(y(21),params(3),1)));
g1_v(58)=T(13)*T(17)*T(110)-T(13)*T(16)*T(6)*T(109);
g1_v(59)=1;
g1_v(60)=T(38)*T(41)*T(25)*T(109)-T(37)*T(40)*T(6)*T(109);
g1_v(61)=T(55)*T(57)*T(110)-T(37)*T(40)*T(6)*T(109);
g1_v(62)=T(13)*T(62)*T(25)*T(109)-T(13)*T(16)*T(6)*T(109);
g1_v(63)=(-(T(6)*T(109)/T(35)/T(64)));
g1_v(64)=T(15)*T(13)*params(3)*T(12)*T(94)*T(10)*(-y(20))/(y(23)*y(23));
g1_v(65)=(-(T(13)*T(19)*T(21)*getPowerDeriv(y(23),params(3),1)));
g1_v(66)=T(58)*(1-params(3))*T(12)*T(93)*y(7)/y(20)/T(10);
g1_v(67)=(-1);
g1_v(68)=(-(1-y(7)*params(10)/2*2*(y(31)/y(7)-params(8))*1/y(7)));
g1_v(69)=(-((-(T(14)/T(35)*(-(params(10)*1/y(7)))))/(T(64)*T(64))));
g1_v(70)=1;
g1_v(71)=T(42)*(1-params(3))*T(31)*T(87)*y(7)/y(19)/T(28);
g1_v(72)=T(34)*T(13)*params(3)*T(31)*T(88)*T(28)*(-y(19))/(y(22)*y(22));
g1_v(73)=(-1);
g1_v(74)=(-(T(13)*T(72)*T(74)*getPowerDeriv(y(22),params(3),1)));
g1_v(75)=T(85);
g1_v(76)=T(85);
g1_v(77)=params(4)*T(63)*params(3)*T(48)*T(84)*(y(35)/y(38)*(-(T(8)*2*(y(35)/y(18)-1)*1/y(18)))+T(29)*1/y(38))/y(24);
g1_v(78)=T(47)*T(36)*(T(33)*params(9)*1/y(19)+params(9)*(y(36)/y(19)-1)*2*y(36)/y(19)*1/y(19))+T(43)*T(46)*T(91)*(T(30)*(-(y(24)*y(39)))/(y(36)*y(36))-y(24)*y(39)/y(36)*(-(T(8)*2*(y(36)/y(19)-1)*1/y(19))))/(T(30)*T(30));
g1_v(79)=T(61)*T(54)*(T(53)*params(9)*1/y(20)+params(9)*(y(37)/y(20)-1)*2*y(37)/y(20)*1/y(20))+T(59)*T(60)*T(97)*(T(52)*(-(y(24)*y(40)))/(y(37)*y(37))-y(24)*y(40)/y(37)*(-(T(8)*2*(y(37)/y(20)-1)*1/y(20))))/(T(52)*T(52));
g1_v(80)=T(47)*params(9)*(y(36)/y(19)-1)*T(33)*(T(27)*T(108)+T(24)*params(6)*getPowerDeriv(y(46),T(5),1))-T(49)*params(9)*(y(35)/y(18)-1)*T(32)*T(26)*T(108);
g1_v(81)=T(61)*params(9)*(y(37)/y(20)-1)*T(53)*T(51)*T(108)-T(49)*params(9)*(y(35)/y(18)-1)*T(32)*T(26)*T(108);
g1_v(82)=(-((-(T(14)*T(26)*T(108)))/(T(35)*T(35))/T(64)));
g1_v(83)=T(47)*params(9)*(y(36)/y(19)-1)*T(33)*T(27)*T(103)-T(105);
g1_v(84)=T(61)*params(9)*(y(37)/y(20)-1)*T(53)*T(51)*T(103)-T(105);
g1_v(85)=(-((-(T(14)*T(104)))/(T(35)*T(35))/T(64)));
g1_v(86)=(-(T(45)*(1-params(3))*T(48)*T(82)*y(24)/y(35)/T(29)));
g1_v(87)=(-(T(45)*(1-params(3))*T(48)*T(82)*y(24)/y(35)/T(29)));
g1_v(88)=params(4)*T(63)*params(3)*T(48)*T(84)*T(29)*(-y(35))/(y(38)*y(38))/y(24);
g1_v(89)=T(47)*params(9)*(y(36)/y(19)-1)*T(33)*T(27)*T(111)-T(49)*params(9)*(y(35)/y(18)-1)*T(32)*T(26)*T(111);
g1_v(90)=T(61)*params(9)*(y(37)/y(20)-1)*T(53)*(T(51)*T(111)+T(24)*params(7)*getPowerDeriv(y(47),T(5),1))-T(49)*params(9)*(y(35)/y(18)-1)*T(32)*T(26)*T(111);
g1_v(91)=(-((-(T(14)*T(26)*T(111)))/(T(35)*T(35))/T(64)));
g1_v(92)=T(59)*T(60)*T(97)*y(24)/y(37)/T(52);
g1_v(93)=params(4)*((1-params(10)*(y(48)/y(24)-params(8)))*(params(10)*y(48)/y(24)*1/y(24)+(y(48)/y(24)-params(8))*params(10)/y(24)-params(10)/2*2*(y(48)/y(24)-params(8))*1/y(24))-T(65)*(-(params(10)*1/y(24))))/((1-params(10)*(y(48)/y(24)-params(8)))*(1-params(10)*(y(48)/y(24)-params(8))));
g1_v(94)=T(43)*T(46)*T(91)*y(24)/y(36)/T(30);
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 11, 33);
end
end
